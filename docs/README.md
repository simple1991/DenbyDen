# 📊 埋点系统文档

## 📁 文档结构

本目录包含完整的埋点系统文档和代码：

### 📄 文档文件

1. **埋点规划详细文档.md**
   - 完整的埋点规划
   - 所有页面的埋点详情
   - 数据字段说明
   - 上报时机和实现要点

2. **埋点使用指南.md**
   - 环境配置步骤
   - 数据库设置说明
   - 组件集成示例
   - 数据查看方法
   - 故障排查

3. **埋点系统总结.md**
   - 已完成工作清单
   - 待完成工作清单
   - 快速开始指南
   - 数据分析示例

4. **supabase_schema.sql**
   - 数据库表结构
   - 索引优化
   - RLS 安全策略

### 💻 代码文件

1. **lib/supabase.ts**
   - Supabase 客户端配置

2. **lib/analytics.ts**
   - 埋点工具库
   - 事件类型定义
   - 批量上报机制

3. **hooks/useAnalytics.ts**
   - React Hooks
   - 简化组件集成

---

## 🚀 快速开始

### 1. 阅读文档顺序

1. 先阅读 **埋点规划详细文档.md** 了解整体规划
2. 然后阅读 **埋点使用指南.md** 学习如何使用
3. 最后参考 **埋点系统总结.md** 查看待办事项

### 2. 设置步骤

1. **安装依赖**
   ```bash
   npm install
   ```

2. **设置数据库**
   - 登录 Supabase Dashboard
   - 执行 `supabase_schema.sql`

3. **集成埋点**
   - 参考 `埋点使用指南.md` 中的示例
   - 在组件中使用相应的 Hooks

---

## 📊 埋点覆盖范围

### 首页 (`/`)
- ✅ 产品卡片曝光
- ✅ 产品点击
- ✅ 加入购物车
- ✅ 邮箱弹窗提交
- ✅ 页面停留时长
- ✅ 跳出率

### 产品详情页 (`/product/[slug]`)
- ✅ 产品详情页曝光
- ✅ 图片滑动
- ✅ 折叠区展开
- ✅ 包装选择
- ✅ 加入购物车
- ✅ 页面停留时长

### 产品展示页 (`/shop`)
- ✅ 产品卡片曝光
- ✅ 产品点击
- ✅ 加入购物车
- ✅ 滚动深度

### 子类展示页 (`/shop/[category]`)
- ✅ 产品卡片曝光
- ✅ 产品点击
- ✅ 筛选/排序操作
- ✅ 滚动深度

---

## 🔗 相关链接

- [Supabase Dashboard](https://supabase.com/dashboard)
- [Supabase 文档](https://supabase.com/docs)

---

## 📝 更新日志

### 2024-01-15
- ✅ 创建完整的埋点规划文档
- ✅ 设计数据库表结构
- ✅ 实现埋点工具库
- ✅ 创建 React Hooks
- ✅ 编写使用指南

